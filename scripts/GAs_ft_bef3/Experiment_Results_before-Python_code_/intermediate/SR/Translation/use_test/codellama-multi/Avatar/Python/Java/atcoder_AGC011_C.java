 ```java
import java.util.Scanner ; public class atcoder_ABC163_E { public static void main ( String [ ] args ) { Scanner stdIn = new Scanner ( System.in ) ; int n = stdIn.nextInt ( ) ; int m = stdIn.nextInt ( ) ; int [ ] vis = new int [ n + 1 ] ; int ci = 0 ; int cb = 0 ; int cc = 0 ; int [ ] [ ] g = new int [ n + 1 ] [ ] ; for ( int i = 0 ; i < m ; i ++ ) { int u = stdIn.nextInt ( ) ; int v = stdIn.nextInt ( ) ; g [ u ] = append ( g [ u ] , v ) ; g [ v ] = append ( g [ v ] , u ) ; } for ( int i = 1 ; i <= n ; i ++ ) { if ( vis [ i ] == 0 ) { if ( g [ i ].length == 0 ) ci ++ ; else if ( dfs ( i ) ) cb ++ ; else cc ++ ; } } System.out.println ( ci * ci + 2 * ci * ( n - ci ) + cc * cc + 2 * cb * cc + 2 * cb * cb ) ; } static int [ ] append ( int [ ] a , int b ) { int [ ] c = new int [ a.length + 1 ] ; for ( int i = 0 ; i < a.length ; i ++ ) c [ i ] = a [ i ] ; c [ a.length ] = b ; return c ; } static int dfs ( int x ) { java.util.Queue < Integer > stk = new java.util.LinkedList < > ( ) ; stk.add ( x ) ; stk.add ( 1 ) ; while ( ! stk.isEmpty ( ) ) { int u = stk.remove ( ) ; int col = stk.remove ( ) ; if ( vis [ u ] != 0 ) { if ( vis [ u ] != col ) return 0 ; continue ; } vis [ u ] = col ; for ( int i : g [ u ] ) stk.add ( i ) ; stk.add ( - 1 ) ; } return 1 ; } }

```
