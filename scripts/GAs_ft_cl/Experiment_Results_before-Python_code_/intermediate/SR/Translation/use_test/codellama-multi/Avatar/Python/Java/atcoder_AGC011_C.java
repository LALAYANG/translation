 ```java
import java.util.Scanner ; public class codeforces_592_A { public static void main ( String [ ] args ) { Scanner sc = new Scanner ( System.in ) ; int n = sc.nextInt ( ) ; int m = sc.nextInt ( ) ; int [ ] vis = new int [ n + 1 ] ; int ci = 0 , cb = 0 , cc = 0 ; int [ ] [ ] g = new int [ n + 1 ] [ ] ; for ( int i = 0 ; i < m ; i ++ ) { int u = sc.nextInt ( ) ; int v = sc.nextInt ( ) ; g [ u ] [ 0 ] ++ ; g [ v ] [ 0 ] ++ ; g [ u ] [ g [ u ] [ 0 ] ] = v ; g [ v ] [ g [ v ] [ 0 ] ] = u ; } for ( int i = 1 ; i <= n ; i ++ ) { if ( vis [ i ] == 0 ) { if ( g [ i ] [ 0 ] == 0 ) ci ++ ; else if ( dfs ( i ) ) cb ++ ; else cc ++ ; } } long ans = ci * ci + 2 * ci * ( n - ci ) + cc * cc + 2 * cb * cc + 2 * cb * cb ; System.out.println ( ans ) ; } static boolean dfs ( int x ) { Queue < Integer > q = new LinkedList < > ( ) ; q.add ( x ) ; boolean flag = true ; while ( ! q.isEmpty ( ) ) { int u = q.poll ( ) ; if ( vis [ u ] != 0 ) { flag &= vis [ u ] == 1 ; continue ; } vis [ u ] = 1 ; for ( int i = 1 ; i <= g [ u ] [ 0 ] ; i ++ ) q.add ( g [ u ] [ i ] ) ; } return flag ; } }

```
