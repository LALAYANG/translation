 ```java
import java.util.Scanner ; public class atcoder_ABC171_E { public static void main ( String [ ] args ) { Scanner sc = new Scanner ( System.in ) ; int N = sc.nextInt ( ) ; int P = sc.nextInt ( ) ; int [ ] arr = new int [ N ] ; for ( int i = 0 ; i < N ; i ++ ) { arr [ i ] = sc.nextInt ( ) ; } int count1 = 0 ; int count0 = 0 ; for ( int i = 0 ; i < N ; i ++ ) { if ( arr [ i ] % 2 == 1 ) { count1 ++ ; } else { count0 ++ ; } } long ans = 0 ; for ( int i = 0 ; i <= count0 ; i ++ ) { ans += combi ( count0 , i ) ; } long time = 0 ; while ( time <= count1 ) { if ( time % 2 == P ) { ans += combi ( count1 , time ) ; } time ++ ; } System.out.println ( ans ) ; } public static long combi ( int n , int k ) { long ans = 1 ; for ( int i = 0 ; i < k ; i ++ ) { ans *= n - i ; ans /= i + 1 ; } return ans ; } }

```
