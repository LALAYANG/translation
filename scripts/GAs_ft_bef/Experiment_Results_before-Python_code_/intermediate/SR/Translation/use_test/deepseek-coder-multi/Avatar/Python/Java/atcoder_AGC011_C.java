```java
import java.util.* ; import java.io.* ; public class codeforces_272_B { public static void main ( String [ ] args ) throws IOException { Scanner sc = new Scanner ( System.in ) ; PrintWriter pw = new PrintWriter ( System.out ) ; int n = sc.nextInt ( ) ; int m = sc.nextInt ( ) ; ArrayList < Integer > [ ] g = new ArrayList [ n + 1 ] ; for ( int i = 0 ; i <= n ; i ++ ) { g [ i ] = new ArrayList < > ( ) ; } for ( int i = 0 ; i < m ; i ++ ) { int u = sc.nextInt ( ) ; int v = sc.nextInt ( ) ; g [ u ].add ( v ) ; g [ v ].add ( u ) ; } int [ ] vis = new int [ n + 1 ] ; int ci = 0 ; int cb = 0 ; int cc = 0 ; for ( int i = 1 ; i <= n ; i ++ ) { if ( vis [ i ] == 0 ) { if ( g [ i ].size ( ) == 0 ) ci ++ ; else { boolean ok = true ; Queue < Integer > q = new LinkedList < > ( ) ; q.add ( i ) ; vis [ i ] = 1 ; while ( ! q.isEmpty ( ) ) { int u = q.poll ( ) ; for ( int v : g [ u ] ) { if ( vis [ v ] == 0 ) { vis [ v ] = 3 - vis [ u ] ; q.add ( v ) ; } else { if ( vis [ v ] == vis [ u ] ) { ok = false ; break ; } } } if ( ! ok ) break ; } if ( ok ) cb ++ ; else cc ++ ; } } pw.println ( 1L * ci * ci + 2L * ci * ( n - ci ) + cc * cc + 2L * cb * cc + 2L * cb * cb ) ; pw.close ( ) ; } }

```
