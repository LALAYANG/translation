// Translated code snippet to Java

// Define the read_ints function to read integers from input

// Define the dfs function for depth-first search

// Define the solve function to solve the problem

// Initialize the graph, perform DFS, and calculate the answer

// Continue solving the problem until EOFError is encountered