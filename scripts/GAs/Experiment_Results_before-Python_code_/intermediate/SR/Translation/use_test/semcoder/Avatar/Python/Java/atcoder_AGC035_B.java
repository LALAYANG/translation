Thought process:
1. Read the input values for `N` and `M`.
2. Initialize data structures to store edges, degrees, parity, and flags.
3. Read the edges and update degrees.
4. Check if the number of edges is odd, then print -1 and exit.
5. Initialize a priority queue with degrees as keys.
6. Process the queue until it's empty, updating parity and printing edges accordingly.

```java
// Java solution
```

