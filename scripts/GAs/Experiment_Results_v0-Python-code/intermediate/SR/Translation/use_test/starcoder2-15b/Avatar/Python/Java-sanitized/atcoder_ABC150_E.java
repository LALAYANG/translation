The code is not very efficient, because it checks the value of the function at each point.

Rewrite the code using the binary search algorithm to find the maximum value of the function.